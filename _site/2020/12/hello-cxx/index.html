








<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>飞岩‘s blog | Hello, C++ </title>
    <meta name="theme-color" content="#222222"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/popper.min.js"></script>
    <script src="/assets/js/bootstrap4.min.js"></script>
    <script src="/assets/js/header.js"></script>
    <script src="/assets/css/svg-with-js/js/fontawesome-all.js"></script>
    <link href="/assets/css/bootstrap4.min.css" rel="stylesheet">
    <link href="/assets/css/theme.css" rel="stylesheet">
    <link href="/assets/css/syntax.css" rel="stylesheet">
 </head>

<body>






<script type="text/javascript">
    WebFontConfig = {
        google: {
            families: ['Ubuntu::latin']
        }
    };
    (function () {
        var wf = document.createElement('script');
        wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
            '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
        wf.type = 'text/javascript';
        wf.async = 'true';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(wf, s);
    })();
</script>

<nav class="navbar navbar-expand-lg fixed-top navbar-dark">
    <div class="container">
        <a class="navbar-brand" href="/">飞岩‘s blog</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-item nav-link" href="/">/home</a>
                <a class="nav-item nav-link" href="/archive">/archive</a>
                <a class="nav-item nav-link" href="/tags">/tags</a>
                <a class="nav-item nav-link" href="/about">/about</a>
            </div>
        </div>
    </div>
</nav>

    <div class="wrapper">
      <div class="content">
        <div class="container container-center">
          <div class="row">
            <div class="col-md-8 offset-md-1">
              <div class="article">
                <div class="card">
                  <h1><a href="/2020/12/hello-cxx/">Hello, C++</a></h1>
                  <div class="post-meta">
                    <div class="post-time">
                      <i class="fa fa-calendar-alt"></i>
                      <time>06 Dec 2020</time>
                    </div>
                    <ul>
                      
                        <li><a href="/tag/c++">c++</a></li>
                      
                    </ul>
                  </div>
                  <div class="post-content">
                    
                    <h2 id="首先看一个例子">首先看一个例子</h2>

<ul>
  <li>hello
    <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// +------------------------------------------------------------------------+</span>
<span class="c1">// | Copyright (c) YanJibin &lt;qivmvip AT gmail DOT net&gt; All rights reserved. |</span>
<span class="c1">// | Licensed under the MIT license,  see LICENSE file in the project root.  |</span>
<span class="c1">// +------------------------------------------------------------------------+</span>
<span class="c1">// + author : YanJibin &lt;qivmvip AT gmail DOT net&gt;</span>
<span class="c1">// + date   : 2020-03-27</span>
<span class="c1">// + desc   : timer implementation</span>


<span class="cp">#ifndef GYPSY_UTILS_TIMER_IMPL_HXX
#define GYPSY_UTILS_TIMER_IMPL_HXX
</span>

<span class="cp">#include "./base.hxx"
#include "./service.hxx"
#include "./ns.hxx"
#include &lt;chrono&gt;
</span>

<span class="n">GYPSY_DETAIL_TIMER_BEGIN</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">Clock</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">impl</span> <span class="o">:</span> <span class="k">public</span> <span class="n">base</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">using</span> <span class="n">self</span> <span class="o">=</span> <span class="n">impl</span><span class="p">;</span>
    <span class="k">using</span> <span class="n">clock</span> <span class="o">=</span> <span class="n">Clock</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">impl</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">service_</span><span class="p">.</span><span class="n">initialize</span><span class="p">();</span>
        <span class="n">service_</span><span class="p">.</span><span class="n">activate</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">impl</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">service_</span><span class="p">.</span><span class="n">deactivate</span><span class="p">();</span>
        <span class="n">service_</span><span class="p">.</span><span class="n">finalize</span><span class="p">();</span>
    <span class="p">}</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">int</span> <span class="n">set_timeout</span><span class="p">(</span><span class="n">callback</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">cb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delay</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">service_</span><span class="p">.</span><span class="n">set_timeout</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">{</span><span class="n">delay</span><span class="p">});</span>
    <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">int</span> <span class="n">set_interval</span><span class="p">(</span><span class="n">callback</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">cb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">interval</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">service_</span><span class="p">.</span><span class="n">set_interval</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">{</span><span class="n">interval</span><span class="p">});</span>
    <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">clear</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">service_</span><span class="p">.</span><span class="n">clear</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">bool</span> <span class="n">available_</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="n">service</span><span class="o">&lt;</span><span class="n">clock</span><span class="o">&gt;</span> <span class="n">service_</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">using</span> <span class="n">steady_clock_impl</span> <span class="o">=</span> <span class="n">impl</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">steady_clock</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">using</span> <span class="n">system_clock_impl</span> <span class="o">=</span> <span class="n">impl</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">GYPSY_DETAIL_TIMER_END</span>


<span class="cp">#endif // GYPSY_UTILS_TIMER_BASE_HXX
</span></code></pre></div>    </div>
  </li>
</ul>

<h2 id="原理">原理</h2>

<p>C++语言发展大概可以分为三个阶段：第一阶段从80年代到1995年。这一阶段C++语言基本上是传统类型上的面向对象语言，并且凭借着接近C语言的效率，在工业界使用的开发语言中占据了相当大份额；第二阶段从1995年到2000年，这一阶段由于标准模板库（STL）和后来的Boost等程序库的出现，泛型程序设计在C++中占据了越来越多的比重。当然，同时由于Java、C#等语言的出现和硬件价格的大规模下降，C++受到了一定的冲击；第三阶段从2000年至今，由于以Loki、MPL(Boost)等程序库为代表的产生式编程和模板元编程的出现，C++出现了发展历史上又一个新的高峰，这些新技术的出现以及和原有技术的融合，使C++已经成为当今主流程序设计语言中最复杂的一员。</p>

<p>比雅尼·斯特劳斯特鲁普（Stroustrup）工作起于1979年的C with Classes。这个构思起源于斯特劳斯特鲁普做博士论文时的一些程序撰写经验。他发现Simula具备很利于大型软件开发的特点，但Simula的运行速度太慢，无法对现实需求发挥功效；BCPL虽快得多，但它过于低端的特性，使其不适于大型软件的开发。当斯特劳斯特鲁普开始在贝尔实验室工作时，他有分析UNIX核心关于分布式计算的问题。回想起他的博士论文经验，斯特劳斯特鲁普开始为C语言增强一些类似Simula的特点[2]。之所以选择C，是因为它适于各种用途、快速和可移植性。除了C和Simula之外，同时也从其它语言中获取灵感，如ALGOL 68、Ada、CLU以及ML。</p>

<p>刚开始时，类别、派生类、存储类型检查、内联和缺省参数特性，都是透过Cfront引入C语言之中[3]。</p>

<p>1983年，C with Classes改命名为C++（++是C语言中的增值操作符）。加入了新的特性，其中包括虚函数、函数名和运算符重载、参考、常量、用户可控制的自由空间存储区控制、改良的类型检查，以及新的双斜线（//）单行注解风格。</p>

<p>1985年，发布第一版《C++程序设计语言》，提供一个重点的语言参考，至此还不是官方标准[4]。1985年10月出现了第一个商业化发布。</p>

<p>1989年，发布了Release 2.0。引入了多重继承、抽象类别、静态成员函数、常量成员函数，以及成员保护。1990年，出版了The Annotated C++ Reference Manual。这本书后来成为标准化的基础。稍后还引入了模板、异常处理、名字空间、新的强制类型转换，以及布尔类型。</p>

<p>随着C++语言的演变，也逐渐演化出相应的标准程序库。最先加进C++标准库的是流I/O程序库，其用以取代传统的C函数，如printf和scanf。随后所引入的程序库中最重要的便是标准模板库，简称STL。</p>

<p>多年后，一个联合的ANSI-ISO委员会于1998年对C++标准化（ISO/IEC 14882：1998）。在官方发布1998标准的若干年后，委员会处理缺陷报告，并于2003年发布一个C++标准的修正版本。2005年，一份名为Library Technical Report 1（简称TR1）的技术报告发布。虽然还不是官方标准的一部分，不过它所提供的几个扩展可望成为下一版C++标准的一部分。几乎所有目前仍在维护的C++编译器皆已支持TR1。</p>

<p>目前最新的C++标准是2017年12月发布的ISO/IEC 14882:2017[5]，又称C++17或C++1z。</p>

<p>虽然C++免专利，但标准文件本身并不是免费的，尽管标准文档不是免费的，但是很容易从网络中获取，最简单的就是C++标准文档之前的最后一次草稿版本，它与标准的差别几乎只在于排版上。</p>


                    

                  </div>
                  
                </div>
              </div>
            </div>
            <div class="col-md-3 hidden-xs">
              <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2020/12/hello-cxx/">Hello, C++</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul class="fa-ul">
    
    
    <li><span class="fa-li"><i class="fas fa-tag"></i></span>
            <a href="/tag/c++" data-toggle="tooltip" data-placement="right" title="1">
        <span>c++</span></a></li>
    
  </ul>
</div>

            </div>
          </div>
        </div>
        

      </div>
          <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>YanJibin &copy; 2020</p>
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="qivmvip on Github" href="https://github.com/qivmvip" target="_blank"><i class="fab fa-github fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title=" on StackOverflow" href="https://stackoverflow.com/users/" target="_blank"><i class="fab fa-stack-overflow fa-2x"></i></a>
    </li>
  

  

  
    <li>
      <a title=" on Instagram" href="https://instagram.com/" target="_blank"><i class="fab fa-instagram fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title=" on Last.fm" href="https://www.lastfm.com/user/" target="_blank"><i class="fab fa-lastfm fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title="feed.xml RSS" href="/feed.xml" target="_blank"><i class="fas fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>

    </div>
  </body>
</html>
